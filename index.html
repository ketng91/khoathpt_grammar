<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kho√° THPT - L·ªõp Anh th·∫ßy K·∫øt</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #fff8f0;
  margin: 0;
  padding: 0;
  text-align: center;
}
header {
  background-color: #ffd6ba;
  padding: 15px 20px;
  font-weight: bold;
  color: #7a4e3e;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}
.header-left { position: absolute; left: 20px; }
.header-left a {
  display: flex; align-items: center; gap: 8px;
  font-size: 18px; color: #7a4e3e; text-decoration: none;
}
.header-left a i { font-size: 18px; }
.header-center { font-size: 22px; font-weight: bold; }
.top-select { display: flex; justify-content: flex-start; margin: 20px; width: 100%; }
select {
  padding: 8px 14px; font-size: 18px;
  border-radius: 8px; border: 2px solid #a0e7e5;
  background-color: #e3fdfd;
}
#timerBox { margin: -10px auto 5px auto; font-size: 24px; text-align: center; }
#timerBox button {
  margin-left: 10px; padding: 6px 12px; font-size: 18px;
  border-radius: 8px; border: none; cursor: pointer; background-color: #a0e7e5;
}
#timerBox button:hover { background-color: #ffb3ba; }
.exercise { width: 70%; margin: 20px auto; text-align: left; font-size: 22px; }
@media (max-width: 768px) {
  .exercise { width: 100%; margin: 20px auto; box-sizing: border-box; }
}
@media (max-width: 600px) {
  header { flex-direction: column; padding: 10px; }
  .header-left { position: static; margin-bottom: 6px; }
  .header-center { text-align: center; margin-top: 4px; }
}
body, html { overflow-x: hidden; }
.question-box {
  width: 100%; min-height: 60px; border: 2px solid #a0e7e5;
  border-radius: 8px; padding: 10px; margin: 10px 0;
  font-size: 25px; font-weight: bold; background-color: #e3fdfd;
}
.option-row { 
  display: flex; 
  align-items: flex-start;   /* ‚Üê thay ƒë·ªïi ƒë·ªÉ textarea kh√¥ng b·ªã l·ªách */
  margin: 12px 0; 
  gap: 12px;
}
.option-row input[type="radio"] { 
  margin-top: 6px;
  transform: scale(1.3); 
}
.option-row label {
  flex: 1;
  padding-top: 3px;
}
.note-small {
  width: 600px;
  min-height: 38px;
  padding: 6px 10px;
  font-size: 22px;
  color: #FF0000;               /* ƒë·ªè ƒë·∫≠m h∆°n ch√∫t cho d·ªÖ ƒë·ªçc */
  background-color: #F1F3E0;     /* xanh l√° r·∫•t nh·∫°t */
  border: 1px solid #b3e6b3;
  border-radius: 6px;
  resize: vertical;
  font-family: Arial, sans-serif;
  box-sizing: border-box;
}
.result { font-weight: bold; font-size: 20px; margin-top: 10px; }
.exercise-buttons { margin: 20px 0 12px 0; }
.exercise-buttons button {
  padding: 10px 18px; font-size: 20px;
  border-radius: 8px; border: none; margin-right: 15px;
  cursor: pointer; background-color: #a0e7e5;
}
.exercise-buttons button:hover { background-color: #ffb3ba; }

/* Textarea l·ªõn ·ªü d∆∞·ªõi c√πng - c√πng k√≠ch c·ª° v·ªõi question-box */
.note-large {
  width: 72%;
  min-height: 100px;            /* to & r·ªông nh∆∞ question box */
  padding: 12px;
  font-size: 22px;
  color: #FF0000;
  background-color: #D9E9CF;
  border: 2px solid #b3e6b3;
  border-radius: 8px;
  resize: vertical;
  margin-top: 25px;
  font-family: Arial, sans-serif;
  box-sizing: border-box;
}
</style>
</head>
<body>
<header>
  <div class="header-left">
    <a href="https://ketng91.github.io/lopanhthayket/">
      <i class="fa-solid fa-house"></i> L·ªõp Anh th·∫ßy K·∫øt
    </a>
  </div>
  <div class="header-center">Practice</div>
</header>
<div class="top-select">
  <select id="exerciseList">
    <option value="1">Tr·∫Øc nghi·ªám - Test 1</option>
    <option value="2">Tr·∫Øc nghi·ªám - Test 2</option>
    <option value="3">Tr·∫Øc nghi·ªám - Test 3</option>
    <option value="4">Tr·∫Øc nghi·ªám - Test 4</option>
  </select>
</div>
<div id="timerBox">
  <span id="timer">00:00:00</span>
  <button onclick="startTimer()">Start</button>
  <button onclick="resetTimer()">Reset</button>
</div>
<div class="exercise" id="exercise"></div>

<!-- Textarea l·ªõn ƒë·∫∑t ngo√†i kh·ªëi question ƒë·ªÉ lu√¥n hi·ªÉn th·ªã ·ªü d∆∞·ªõi c√πng -->
<textarea class="note-large" placeholder="Ghi ch√∫ chung cho to√†n b√†i / ph·∫ßn n√†y..."></textarea>

<footer>ChƒÉm ch·ªâ th√¨ ƒë·∫≠u!</footer>


<!-- ‚≠ê‚≠ê PH·∫¢I ƒê·ªÇ CONFETTI TR∆Ø·ªöC CODE ‚≠ê‚≠ê -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
// ===== 1. exercises =====
const exercises = {
/* TEST 1*/
  1: [
{
    q: "C√¢u 1. Ann, __________ for the safety of her child, ran to stop him playing with the electric socket.",
    options: ["concerned", "concerning", "to concern", "to be concerned"],
    correct: 0,
    explain: "D√πng r√∫t g·ªçn m·ªánh ƒë·ªÅ quan h·ªá d·∫°ng b·ªã ƒë·ªông (Who was concerned -> concerned) ƒë·ªÉ ch·ªâ tr·∫°ng th√°i c·∫£m x√∫c c·ªßa ch·ªß ng·ªØ."
  },
  {
    q: "C√¢u 2. The police are searching the area __________ the boy was last seen.",
    options: ["where", "which", "that", "how"],
    correct: 0,
    explain: "D√πng tr·∫°ng t·ª´ quan h·ªá 'where' ƒë·ªÉ thay th·∫ø cho danh t·ª´ ch·ªâ n∆°i ch·ªën 'the area'."
  },
  {
    q: "C√¢u 3. As a retired person, the place in __________ my mother spends the most time is the garden.",
    options: ["which", "that", "what", "where"],
    correct: 0,
    explain: "Sau gi·ªõi t·ª´ (in) ch√∫ng ta s·ª≠ d·ª•ng ƒë·∫°i t·ª´ quan h·ªá 'which'. C·ª•m 'in which' t∆∞∆°ng ƒë∆∞∆°ng v·ªõi 'where'."
  },
  {
    q: "C√¢u 4. Everyone at the meeting yesterday, __________ proved very constructive, showed their support for the new stadium.",
    options: ["which", "where", "what", "when"],
    correct: 0,
    explain: "D√πng 'which' l√†m ƒë·∫°i t·ª´ quan h·ªá thay th·∫ø cho to√†n b·ªô m·ªánh ƒë·ªÅ ho·∫∑c s·ª± vi·ªác (cu·ªôc h·ªçp) ƒë·ª©ng tr∆∞·ªõc n√≥."
  },
  {
    q: "C√¢u 5. Liquorice, __________ contains clycyrrhetic acid, was a favourite ingredient of ancient Egyptian medicines.",
    options: ["which", "who", "when", "where"],
    correct: 0,
    explain: "D√πng 'which' l√†m ch·ªß ng·ªØ thay th·∫ø cho danh t·ª´ ch·ªâ v·∫≠t 'Liquorice' (cam th·∫£o)."
  },
  {
    q: "C√¢u 6. The reason __________ she gave us for not coming early made us disappointed.",
    options: ["that", "why", "for which", "what"],
    correct: 0,
    explain: "M·∫∑c d√π c√≥ 'The reason' nh∆∞ng ph√≠a sau l√† t√¢n ng·ªØ c·ªßa ƒë·ªông t·ª´ 'gave', n√™n d√πng 'that' ho·∫∑c 'which' thay v√¨ 'why'."
  },
  {
    q: "C√¢u 7. They would like a teacher __________ native language is English.",
    options: ["whose", "who", "from whom", "whom"],
    correct: 0,
    explain: "D√πng 'whose' ƒë·ªÉ ch·ªâ s·ª± s·ªü h·ªØu: ng√¥n ng·ªØ m·∫π ƒë·∫ª c·ªßa gi√°o vi√™n ƒë√≥ (teacher's native language)."
  },
  {
    q: "C√¢u 8. His new job is near enough __________ he wants to live.",
    options: ["to where", "where", "in which", "on which"],
    correct: 0,
    explain: "C·∫•u tr√∫c 'near to + n∆°i ch·ªën'. ·ªû ƒë√¢y 'where' ƒë√≥ng vai tr√≤ nh∆∞ m·ªôt danh t·ª´ ch·ªâ n∆°i ch·ªën."
  },
  {
    q: "C√¢u 9. This is Mrs. Belinda __________ book the chapters were prepared and edited perfectly.",
    options: ["in whose", "in which", "from whose", "whose"],
    correct: 0,
    explain: "D√πng 'in whose' v√¨ c√°c ch∆∞∆°ng n·∫±m TRONG (in) cu·ªën s√°ch C·ª¶A (whose) b√† Belinda."
  },
  {
    q: "C√¢u 10. Our course needs some requirements __________ are listed here.",
    options: ["which", "when", "what", "where"],
    correct: 0,
    explain: "D√πng 'which' l√†m ch·ªß ng·ªØ thay th·∫ø cho danh t·ª´ ch·ªâ v·∫≠t 'requirements'."
  }
  ],

/* TEST 2*/
  2: [
{
    q: "101. Our ------ indicate that your company car is due for regular service next month.",
    options: ["records", "recording", "recorded", "recordable"],
    correct: 0,
    explain: "D√πng danh t·ª´ s·ªë nhi·ªÅu 'records' (h·ªì s∆°/s·ªï s√°ch) l√†m ch·ªß ng·ªØ cho ƒë·ªông t·ª´ 'indicate'."
  },
  {
    q: "102. The ------ entrance to our office building will be closed on Tuesday because of construction.",
    options: ["main", "next", "sure", "early"],
    correct: 0,
    explain: "C·ª•m t·ª´ 'main entrance' (l·ªëi v√†o ch√≠nh) l√† c√°ch k·∫øt h·ª£p t·ª´ t·ª± nhi√™n nh·∫•t trong ng·ªØ c·∫£nh n√†y."
  },
  {
    q: "103. Any document marked ‚ÄúConfidential‚Äù must be handled and stored ------.",
    options: ["carefully", "careful", "carefulness", "more careful"],
    correct: 0,
    explain: "S·ª≠ d·ª•ng tr·∫°ng t·ª´ 'carefully' (m·ªôt c√°ch c·∫©n th·∫≠n) ƒë·ªÉ b·ªï nghƒ©a cho c√°c ƒë·ªông t·ª´ 'handled' v√† 'stored'."
  },
  {
    q: "104. The new technology ------ trains to switch quickly between electric and diesel modes.",
    options: ["allows", "rides", "forms", "conducts"],
    correct: 0,
    explain: "C·∫•u tr√∫c 'allow something/someone to do something' (cho ph√©p c√°i g√¨ l√†m g√¨)."
  },
  {
    q: "105. The Chocobonne Corporation says it plans to open 28 new ------ in the next three years.",
    options: ["stores", "storing", "store", "storage"],
    correct: 0,
    explain: "Sau s·ªë ƒë·∫øm '28' v√† t√≠nh t·ª´ 'new' c·∫ßn m·ªôt danh t·ª´ s·ªë nhi·ªÅu ƒë·∫øm ƒë∆∞·ª£c: 'stores' (c·ª≠a h√†ng)."
  },
  {
    q: "106. The Lofstrom Shopping Center is ------ new tenants to rent vacant retail space.",
    options: ["seeking", "growing", "facing", "relating"],
    correct: 0,
    explain: "D·ª±a v√†o nghƒ©a: 'seeking' (t√¨m ki·∫øm) kh√°ch thu√™ m·ªõi cho m·∫∑t b·∫±ng tr·ªëng."
  },
  {
    q: "107. The painter Marion Settimi developed ------ distinctive style during the years she lived in Indonesia.",
    options: ["her", "herself", "hers", "she"],
    correct: 0,
    explain: "D√πng t√≠nh t·ª´ s·ªü h·ªØu 'her' ƒë·ª©ng tr∆∞·ªõc c·ª•m danh t·ª´ 'distinctive style'."
  },
  {
    q: "108. The company picnic at Floral Park will begin at noon on Saturday and end ------ 4:00 P.M.",
    options: ["around", "until", "outside", "within"],
    correct: 0,
    explain: "D√πng 'around' (v√†o kho·∫£ng) ƒë·ªÉ ch·ªâ th·ªùi gian k·∫øt th√∫c ∆∞·ªõc ch·ª´ng."
  },
{
    q: "109. Last Monday, the department ------ Mr. Okada‚Äôs recent promotion to manager.",
    options: ["celebrated", "will be celebrating", "is celebrating", "celebrates"],
    correct: 0,
    explain: "D·∫•u hi·ªáu 'Last Monday' cho th·∫•y h√†nh ƒë·ªông ƒë√£ x·∫£y ra trong qu√° kh·ª©, d√πng th√¨ qu√° kh·ª© ƒë∆°n 'celebrated'."
  },
  {
    q: "110. Ms. Xuan‚Äôs ------ for reducing the company‚Äôs energy consumption is worth considering.",
    options: ["proposal", "revision", "attention", "meaning"],
    correct: 0,
    explain: "D·ª±a v√†o nghƒ©a: 'proposal' (ƒë·ªÅ xu·∫•t) cho vi·ªác c·∫Øt gi·∫£m ti√™u th·ª• nƒÉng l∆∞·ª£ng."
  },
  {
    q: "111. Dr. Grayston ------ accepted the position of school superintendent.",
    options: ["enthusiastically", "enthusiast", "enthusiastic", "enthusiasm"],
    correct: 0,
    explain: "C·∫ßn m·ªôt tr·∫°ng t·ª´ 'enthusiastically' (m·ªôt c√°ch nhi·ªát t√¨nh) ƒë·ªÉ b·ªï nghƒ©a cho ƒë·ªông t·ª´ 'accepted'."
  },
  {
    q: "112. Austin Gallery is located at the northern end of Arch Street, ------ the Verdigris Bistro.",
    options: ["opposite", "except", "across", "plus"],
    correct: 0,
    explain: "D√πng gi·ªõi t·ª´ ch·ªâ v·ªã tr√≠ 'opposite' (ƒë·ªëi di·ªán) ƒë·ªÉ m√¥ t·∫£ ƒë·ªãa ƒëi·ªÉm."
  },
  {
    q: "113. Mr. Garcia promised ------ a mentor to Ms. Winston after he retired.",
    options: ["to become", "became", "becoming", "had become"],
    correct: 0,
    explain: "C·∫•u tr√∫c: 'promise to do something' (h·ª©a l√†m g√¨ ƒë√≥)."
  },
  {
    q: "114. Once considered a specialty product, shoes made from recycled materials are now ------ available.",
    options: ["widely", "upward", "enough", "closely"],
    correct: 0,
    explain: "C·ª•m t·ª´ 'widely available' (c√≥ s·∫µn r·ªông r√£i) l√† c√°ch k·∫øt h·ª£p t·ª´ ph·ªï bi·∫øn."
  },
  {
    q: "115. Yuping University has formed ------ with local businesses to create internship opportunities for its students.",
    options: ["partnerships", "partner", "partners", "partnering"],
    correct: 0,
    explain: "D·ª±a v√†o nghƒ©a v√† c·∫•u tr√∫c: 'form partnerships' (thi·∫øt l·∫≠p quan h·ªá ƒë·ªëi t√°c)."
  },
  {
    q: "116. Our market research shows that buyers with limited ------ of a product often look for information from expert sources.",
    options: ["knowledge", "approval", "perception", "consideration"],
    correct: 0,
    explain: "C·ª•m t·ª´ 'limited knowledge' (ki·∫øn th·ª©c h·∫°n h·∫πp) ph√π h·ª£p v·ªõi ng·ªØ c·∫£nh t√¨m ki·∫øm th√¥ng tin t·ª´ chuy√™n gia."
  },
  {
    q: "117. ------ is preventing the graphic artists from accessing the image files in the main database.",
    options: ["Something", "Many", "Other", "Whoever"],
    correct: 0,
    explain: "D√πng ƒë·∫°i t·ª´ b·∫•t ƒë·ªãnh 'Something' (ƒëi·ªÅu g√¨ ƒë√≥) l√†m ch·ªß ng·ªØ cho ƒë·ªông t·ª´ s·ªë √≠t 'is'."
  },
  {
    q: "118. ------ a delay, Thaintec completed the renovation of its warehouse before the target date of April 7.",
    options: ["Despite", "Although", "According to", "However"],
    correct: 0,
    explain: "D√πng 'Despite' + c·ª•m danh t·ª´ ƒë·ªÉ ch·ªâ s·ª± t∆∞∆°ng ph·∫£n (M·∫∑c d√π c√≥ s·ª± tr√¨ ho√£n nh∆∞ng v·∫´n ho√†n th√†nh s·ªõm)."
  },
  {
    q: "119. While its credit card system is offline, the Lexler Department Store is ------ closed for business.",
    options: ["effectively", "effect", "effecting", "effective"],
    correct: 0,
    explain: "D√πng tr·∫°ng t·ª´ 'effectively' (v·ªÅ c∆° b·∫£n/coi nh∆∞ l√†) ƒë·ªÉ b·ªï nghƒ©a cho t√≠nh t·ª´ 'closed'."
  },
  {
    q: "120. Nearly half of the toy manufacturers surveyed reported increased sales ------ the last two years.",
    options: ["over", "onto", "under", "against"],
    correct: 0,
    explain: "D√πng 'over' + kho·∫£ng th·ªùi gian (over the last two years) ƒë·ªÉ ch·ªâ m·ªôt qu√° tr√¨nh di·ªÖn ra trong su·ªët 2 nƒÉm qua."
  },
{
    q: "121. Nonprofit groups ------ up to three applications for funding consideration during any given calendar year.",
    options: ["may submit", "be submitted", "submitting", "submits"],
    correct: 0,
    explain: "D√πng ƒë·ªông t·ª´ khuy·∫øt thi·∫øu 'may submit' (c√≥ th·ªÉ n·ªôp) ƒë·ªÉ ch·ªâ kh·∫£ nƒÉng/quy·ªÅn h·∫°n c·ªßa ch·ªß ng·ªØ s·ªë nhi·ªÅu 'groups'."
  },
  {
    q: "122. Critics reacted ------ to the new musical, praising the exciting design and impressive choreography.",
    options: ["favorably", "intentionally", "uncertainly", "continuously"],
    correct: 0,
    explain: "D·ª±a v√†o c·ª•m 'praising' (khen ng·ª£i), ch·ªçn tr·∫°ng t·ª´ 'favorably' (m·ªôt c√°ch thu·∫≠n l·ª£i/t√≠ch c·ª±c)."
  },
  {
    q: "123. Clausen‚Äôs Notes is well-known ------ writers and publishers for its in-depth reviews of books.",
    options: ["among", "owed to", "because", "in between"],
    correct: 0,
    explain: "D√πng gi·ªõi t·ª´ 'among' (gi·ªØa/trong s·ªë) ƒë·ªÉ ch·ªâ ƒë·ªëi t∆∞·ª£ng m√† Clausen‚Äôs Notes ƒë∆∞·ª£c bi·∫øt ƒë·∫øn r·ªông r√£i."
  },
  {
    q: "124. The ongoing shortage of hardwood has caused the price of certain furniture items to ------.",
    options: ["soar", "drain", "loop", "fling"],
    correct: 0,
    explain: "D·ª±a v√†o ng·ªØ c·∫£nh thi·∫øu h·ª•t h√†ng h√≥a (shortage), ch·ªçn 'soar' (tƒÉng v·ªçt) ƒë·ªÉ m√¥ t·∫£ gi√° c·∫£."
  },
  {
    q: "125. Attach the ------ tray to any flat steel surface for easy storage and access to household or automotive tools.",
    options: ["magnetic", "magnetize", "magnets", "magnetically"],
    correct: 0,
    explain: "C·∫ßn m·ªôt t√≠nh t·ª´ 'magnetic' (c√≥ t√≠nh t·ª´ t√≠nh/nam ch√¢m) ƒë·ªÉ b·ªï nghƒ©a cho danh t·ª´ 'tray'."
  },
  {
    q: "126. The customer ------ to buy an extended warranty on the dishwasher, so it is not eligible for a free repair.",
    options: ["neglected", "rejected", "omitted", "dismissed"],
    correct: 0,
    explain: "Ch·ªçn 'neglected' (xao nh√£ng/b·ªè qua) vi·ªác mua b·∫£o h√†nh. L∆∞u √Ω: 'rejected' th∆∞·ªùng ƒëi tr·ª±c ti·∫øp v·ªõi danh t·ª´ thay v√¨ 'to V' trong ng·ªØ c·∫£nh n√†y."
  },
  {
    q: "127. Although much of the material appeared to remain ------ in nature, the audience remained attentive throughout Ms. Sharma‚Äôs presentation.",
    options: ["technical", "engage", "engaged", "engagement"],
    correct: 0,
    explain: "C·∫ßn m·ªôt t√≠nh t·ª´ sau ƒë·ªông t·ª´ 'remain'. (L∆∞u √Ω: C√¢u h·ªèi g·ªëc c√≥ ch√∫t l·ªói ƒë√°nh m√°y, 'technical' ho·∫∑c 'dry' th∆∞·ªùng d√πng ·ªü ƒë√¢y ƒë·ªÉ t·∫°o s·ª± ƒë·ªëi l·∫≠p v·ªõi 'attentive')."
  },
  {
    q: "128. ------ fresh fruit and vegetables, vendors at the Wattville Farm Market also sell various handmade goods.",
    options: ["In addition to", "Compared with", "Rather than", "As a result of"],
    correct: 0,
    explain: "D√πng 'In addition to' (Ngo√†i... ra) ƒë·ªÉ b·ªï sung th√™m m·∫∑t h√†ng handmade b√™n c·∫°nh n√¥ng s·∫£n."
  },
  {
    q: "129. ------ route they choose, it should take the management team approximately four hours to drive to the hotel in Antibes.",
    options: ["Whichever", "What", "Some", "Somewhere"],
    correct: 0,
    explain: "D√πng ƒë·∫°i t·ª´ quan h·ªá b·∫•t ƒë·ªãnh 'Whichever' (B·∫•t k·ªÉ l·ªô tr√¨nh n√†o) ƒë·ªÉ ch·ªâ s·ª± l·ª±a ch·ªçn kh√¥ng gi·ªõi h·∫°n."
  },
  {
    q: "130. All Baraantec Ltd. hand tools undergo ------ inspections to ensure they are free of defects.",
    options: ["rigorous", "negotiated", "returnable", "portable"],
    correct: 0,
    explain: "C·ª•m t·ª´ 'rigorous inspections' (ki·ªÉm tra nghi√™m ng·∫∑t) l√† c√°ch k·∫øt h·ª£p t·ª´ chuy√™n d·ª•ng trong qu·∫£n l√Ω ch·∫•t l∆∞·ª£ng."
  },
  ],
/* TEST 3*/

  3: [
    { q: "301. Employees must arrive ------- time for meetings.",
      options: ["in","at","on","to"], correct: 2 },
  ],
  4: [
    { q: "401. The CEO ------- a new policy this week.",
      options: ["announced","announcement","announce","announcing"], correct: 0 },
  ]
};





</script>

<script>
// ===== 2. TIMER =====
let timerInterval = null;
let secondsPassed = 0;
function formatTime(s) {
  const h = Math.floor(s / 3600);
  const m = Math.floor((s % 3600) / 60);
  const sec = s % 60;
  return [h,m,sec].map(v=>v.toString().padStart(2,'0')).join(':');
}
function startTimer(){ if(!timerInterval){ timerInterval=setInterval(()=>{secondsPassed++;document.getElementById("timer").textContent=formatTime(secondsPassed);},1000);} }
function resetTimer(){ clearInterval(timerInterval); timerInterval=null; secondsPassed=0; document.getElementById("timer").textContent="00:00:00"; }
function fireConfetti(){ confetti({ particleCount:200, spread:100, origin:{x:0.5,y:0.5} }); }
</script>

<script>
// =================== GLOBAL ===================
let currentIndex = 0;
let currentTest = 1;

// =================== LOAD TEST ===================
function loadExercise(testNumber) {
  currentTest = testNumber;
  currentIndex = 0;
  renderQuestion();
}

function renderQuestion() {
  const area = document.getElementById("exercise");
  const data = exercises[currentTest];
  if (!data) {
    area.innerHTML = "<p>Ch∆∞a c√≥ d·ªØ li·ªáu!</p>";
    return;
  }
  const qObj = data[currentIndex];

  let html = `
    <div class="question-block">
      <div class="question-box">${qObj.q}</div>
      ${qObj.options.map((opt, i) => `
        <div class="option-row">
          <input type="radio" name="q" value="${i}" id="opt${i}">
          <label for="opt${i}">${opt}</label>
          <textarea class="note-small" placeholder="Ghi ch√∫..."></textarea>
        </div>
      `).join("")}
      <div class="result" id="result"></div>
      <div class="exercise-buttons">
        <button onclick="checkAnswer()">Check</button>
        <button onclick="nextQuestion()">Next</button>
      </div>
    </div>
  `;
  area.innerHTML = html;
}

function checkAnswer() {
  const data = exercises[currentTest];
  const qObj = data[currentIndex];
  const checked = document.querySelector(`input[name="q"]:checked`);
  const resultDiv = document.getElementById(`result`);
  if (!checked) {
    resultDiv.textContent = "Ch∆∞a ch·ªçn ƒë√°p √°n!";
    resultDiv.style.color = "orange";
    return;
  }
  if (Number(checked.value) === qObj.correct) {
    resultDiv.textContent = "Correct!";
    resultDiv.style.color = "green";
    fireConfetti();
  } else {
    resultDiv.textContent = "Incorrect! ‚Üí " + qObj.explain;
    resultDiv.style.color = "red";
  }
}

function nextQuestion() {
  const data = exercises[currentTest];
  currentIndex++;
  if (currentIndex >= data.length) {
    document.getElementById("exercise").innerHTML =
      `<p>üéâ H·∫øt c√¢u trong b·ªô n√†y r·ªìi! Ch·ªçn Test kh√°c</p>`;
    return;
  }
  renderQuestion();
}

// ===== FIRST LOAD + LISTENER =====
loadExercise(Number(document.getElementById("exerciseList").value));
document.getElementById("exerciseList").addEventListener("change", function(){
  loadExercise(Number(this.value));
});
</script>
</body>
</html>